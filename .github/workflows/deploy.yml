name: ðŸš€ Deploy website to Websupport
on:
  push:
    branches:
      - main
jobs:
  sftp-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: SFTP Deploy
        uses: wlixcc/SFTP-Deploy-Action@v1.2.6  # Updated to latest for password support
        with:
          username: ${{ secrets.FTP_USERNAME }}
          server: ${{ secrets.FTP_SERVER }}  # e.g., sftp.websupport.sk or IP
          password: ${{ secrets.FTP_PASSWORD }}  # Use password for auth (overrides key)
          port: 22  # SFTP port
          local_path: './*'  # Upload all files from repo root (adjust if needed)
          remote_path: ${{ secrets.FTP_PATH }}  # e.g., /www/ or /public_html/
          sftp_only: true  # Use only SFTP (no SSH shell); remote dir won't auto-create
          delete_remote_files: false  # Set to true to delete old files on server
          sftpArgs: '-o ConnectTimeout=10'  # Optional: Increase timeout if needed
